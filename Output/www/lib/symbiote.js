/* esm.sh - esbuild bundle(@symbiotejs/symbiote@1.11.7) es2022 production */
var O=Object.defineProperty,L=(t,e,s)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,v=(t,e,s)=>(L(t,typeof e!="symbol"?e+"":e,s),s);function X(t){let e=s=>{var i;for(let r in s)((i=s[r])==null?void 0:i.constructor)===Object&&(s[r]=e(s[r]));return{...s}};return e(t)}var h=class{constructor(t){t.constructor===Object?this.store=X(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(h.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,e,s=!1){!s&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){h.warn("publish",t);return}this.store[t]=e,this.notify(t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,s=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(h.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),s&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e})}static registerCtx(t,e=Symbol()){let s=h.globalStore.get(e);return s?console.warn('State: context UID "'+e+'" already in use'):(s=new h(t),h.globalStore.set(e,s)),s}static deleteCtx(t){h.globalStore.delete(t)}static getCtx(t,e=!0){return h.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};h.globalStore=new Map;var n=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),P="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",M=P.length-1,$=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let s=0;s<t.length;s++)e+=t[s]==="-"?t[s]:P.charAt(Math.random()*M);return e}};function x(t,e,s){let i=!0,r,o=e.split(".");return o.forEach((l,a)=>{a<o.length-1?t=t[l]:r=l}),t?t[r]=s:i=!1,i}function I(t){return t.split("-").map((e,s)=>e&&s?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,s)=>e&&s?e.toUpperCase():e).join("")}function k(t,e){[...t.querySelectorAll(`[${n.REPEAT_ATTR}]`)].forEach(s=>{let i=s.getAttribute(n.REPEAT_ITEM_TAG_ATTR),r;if(i&&(r=window.customElements.get(i)),!r){r=class extends e.BaseComponent{constructor(){super(),i||(this.style.display="contents")}};let l=s.innerHTML;r.template=l,r.reg(i)}for(;s.firstChild;)s.firstChild.remove();let o=s.getAttribute(n.REPEAT_ATTR);e.sub(o,l=>{if(!l){for(;s.firstChild;)s.firstChild.remove();return}let a=[...s.children],_,C=c=>{c.forEach((u,A)=>{if(a[A])if(a[A].set$)setTimeout(()=>{a[A].set$(u)});else for(let b in u)a[A][b]=u[b];else{_||(_=new DocumentFragment);let b=new r;Object.assign(b.init$,u),_.appendChild(b)}}),_&&s.appendChild(_);let d=a.slice(c.length,a.length);for(let u of d)u.remove()};if(l.constructor===Array)C(l);else if(l.constructor===Object){let c=[];for(let d in l){let u=l[d];Object.defineProperty(u,"_KEY_",{value:d,enumerable:!0}),c.push(u)}C(c)}else console.warn("Symbiote repeat data type error:"),console.log(l)}),s.removeAttribute(n.REPEAT_ATTR),s.removeAttribute(n.REPEAT_ITEM_TAG_ATTR)})}var S="__default__";function U(t,e){if(e.shadowRoot)return;let s=[...t.querySelectorAll("slot")];if(!s.length)return;let i={};s.forEach(r=>{let o=r.getAttribute("name")||S;i[o]={slot:r,fr:document.createDocumentFragment()}}),e.initChildren.forEach(r=>{var o;let l=S;r instanceof Element&&r.hasAttribute("slot")&&(l=r.getAttribute("slot"),r.removeAttribute("slot")),(o=i[l])==null||o.fr.appendChild(r)}),Object.values(i).forEach(r=>{if(r.fr.childNodes.length)r.slot.parentNode.replaceChild(r.fr,r.slot);else if(r.slot.childNodes.length){let o=document.createDocumentFragment();o.append(...r.slot.childNodes),r.slot.parentNode.replaceChild(o,r.slot)}else r.slot.remove()})}function j(t,e){[...t.querySelectorAll(`[${n.EL_REF_ATTR}]`)].forEach(s=>{let i=s.getAttribute(n.EL_REF_ATTR);e.ref[i]=s,s.removeAttribute(n.EL_REF_ATTR)})}function F(t,e){[...t.querySelectorAll(`[${n.BIND_ATTR}]`)].forEach(s=>{let r=s.getAttribute(n.BIND_ATTR).split(";");[...s.attributes].forEach(o=>{if(o.name.startsWith("-")&&o.value){let l=I(o.name.replace("-",""));r.push(l+":"+o.value),s.removeAttribute(o.name)}}),r.forEach(o=>{if(!o)return;let l=o.split(":").map(c=>c.trim()),a=l[0],_;a.indexOf(n.ATTR_BIND_PRFX)===0&&(_=!0,a=a.replace(n.ATTR_BIND_PRFX,""));let C=l[1].split(",").map(c=>c.trim());for(let c of C){let d;c.startsWith("!!")?(d="double",c=c.replace("!!","")):c.startsWith("!")&&(d="single",c=c.replace("!","")),e.sub(c,u=>{d==="double"?u=!!u:d==="single"&&(u=!u),_?u?.constructor===Boolean?u?s.setAttribute(a,""):s.removeAttribute(a):s.setAttribute(a,u):x(s,a,u)||(s[n.SET_LATER_KEY]||(s[n.SET_LATER_KEY]=Object.create(null)),s[n.SET_LATER_KEY][a]=u)})}}),s.removeAttribute(n.BIND_ATTR)})}var g="{{",E="}}",B="skip-text";function K(t){let e,s=[],i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:r=>{var o;return!((o=r.parentElement)!=null&&o.hasAttribute(B))&&r.textContent.includes(g)&&r.textContent.includes(E)&&1}});for(;e=i.nextNode();)s.push(e);return s}var H=function(t,e){K(t).forEach(i=>{let r=[],o;for(;i.textContent.includes(E);)i.textContent.startsWith(g)?(o=i.textContent.indexOf(E)+E.length,i.splitText(o),r.push(i)):(o=i.textContent.indexOf(g),i.splitText(o)),i=i.nextSibling;r.forEach(l=>{let a=l.textContent.replace(g,"").replace(E,"");l.textContent="",e.sub(a,_=>{l.textContent=_})})})},W=[k,U,j,F,H],y="'",T='"',q=/\\([0-9a-fA-F]{1,6} ?)/g;function Y(t){return(t[0]===T||t[0]===y)&&(t[t.length-1]===T||t[t.length-1]===y)}function z(t){return(t[0]===T||t[0]===y)&&(t=t.slice(1)),(t[t.length-1]===T||t[t.length-1]===y)&&(t=t.slice(0,-1)),t}function G(t){let e="",s="";for(var i=0;i<t.length;i++){let r=t[i+1];t[i]==="\\"&&r==='"'?(e+='\\"',i++):t[i]==='"'&&s!=="\\"?e+='\\"':e+=t[i],s=t[i]}return e}function V(t){let e=t;Y(t)&&(e=z(e),e=e.replace(q,(s,i)=>String.fromCodePoint(parseInt(i.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=G(e),e=T+e+T);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}var R=0,m=null,f=null,p=class extends HTMLElement{constructor(){super(),v(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(e=>{let s=this.getCssData(this.__extractCssName(e),!0);s!==null&&this.$[e]!==s&&(this.$[e]=s)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return p}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,e=this.renderShadow){let s;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let r=this.getAttribute(n.USE_TPL);if(r){let o=this.getRootNode(),l=o?.querySelector(r)||document.querySelector(r);l?t=l.content.cloneNode(!0):console.warn(`Symbiote template "${r}" is not found...`)}}if(this.processInnerHtml)for(let r of this.tplProcessors)r(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),t?.constructor===DocumentFragment)s=t;else if(t?.constructor===String){let r=document.createElement("template");r.innerHTML=t,s=r.content.cloneNode(!0)}else this.constructor.__tpl&&(s=this.constructor.__tpl.content.cloneNode(!0));for(let r of this.tplProcessors)r(s,this)}let i=()=>{s&&(e&&this.shadowRoot.appendChild(s)||this.appendChild(s)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let r=document.createElement("link");r.rel="stylesheet",r.href=this.constructor.__shadowStylesUrl,r.onload=i,this.shadowRoot.prepend(r)}else i()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=$.generate(),this.style.setProperty(n.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(n.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=((t=this.getAttribute(n.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=h.registerCtx({},this)),this.__localCtx}get nodeCtx(){return h.getCtx(this.ctxName,!1)||h.registerCtx({},this.ctxName)}static __parseProp(t,e){let s,i;if(t.startsWith(n.EXT_DATA_CTX_PRFX))s=e.nodeCtx,i=t.replace(n.EXT_DATA_CTX_PRFX,"");else if(t.includes(n.NAMED_DATA_CTX_SPLTR)){let r=t.split(n.NAMED_DATA_CTX_SPLTR);s=h.getCtx(r[0]),i=r[1]}else s=e.localCtx,i=t;return{ctx:s,name:i}}sub(t,e,s=!0){let i=o=>{this.isConnected&&e(o)},r=p.__parseProp(t,this);r.ctx.has(r.name)?this.allSubs.add(r.ctx.sub(r.name,i,s)):window.setTimeout(()=>{this.allSubs.add(r.ctx.sub(r.name,i,s))})}notify(t){let e=p.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=p.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,s=!1){let i=p.__parseProp(t,this);i.ctx.add(i.name,e,s)}add$(t,e=!1){for(let s in t)this.add(s,t[s],e)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(e,s,i)=>{let r=p.__parseProp(s,this);return r.ctx.pub(r.name,i),!0},get:(e,s)=>{let i=p.__parseProp(s,this);return i.ctx.read(i.name)}})}return this.__stateProxy}set$(t,e=!1){for(let s in t){let i=t[s];e||![String,Number,Boolean].includes(i?.constructor)?this.$[s]=i:this.$[s]!==i&&(this.$[s]=i)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(n.CTX_OWNER_ATTR)&&this.getAttribute(n.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(n.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(n.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(n.NAMED_DATA_CTX_SPLTR)){let s=e.split(n.NAMED_DATA_CTX_SPLTR),i=s[0].trim(),r=s[1].trim();if(i&&r){let o=h.getCtx(i,!1);o||(o=h.registerCtx({},i)),o.add(r,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(t=this.getAttribute(n.CTX_NAME_ATTR))==null?void 0:t.trim();if(e&&this.style.setProperty(n.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[n.SET_LATER_KEY]){for(let s in this[n.SET_LATER_KEY])x(this,s,this[n.SET_LATER_KEY][s]);delete this[n.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let s of W)this.addTemplateProcessor(s);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let s=this.getRootNode();if(!s)return;if(s?.querySelector(`link[${n.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let r=this.constructor.__rootStylesLink.cloneNode(!0);r.setAttribute(n.ROOT_STYLE_ATTR_NAME,this.constructor.is),r.onload=()=>{this.render()},s.nodeType===Node.DOCUMENT_NODE?s.head.appendChild(r):s.prepend(r)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);f?.delete(this.updateCssData),f?.size||(m?.disconnect(),m=null,f=null)},100)))}static reg(t,e=!1){t||(R++,t=`${n.AUTO_TAG_PRFX}-${R}`),this.__tag=t;let s=window.customElements.get(t);if(s){!e&&s!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,s){var i;if(e===s)return;let r=(i=this.constructor.__attrDesc)==null?void 0:i[t];r?this.__dataCtxInitialized?this.$[r]=s:this.init$[r]=s:this[t]=s}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let s=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=V(s)}catch{!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,s)=>s===0?"":e).join("--")}__initStyleAttrObserver(){f||(f=new Set),f.add(this.updateCssData),m||(m=new MutationObserver(t=>{t[0].type==="attributes"&&f.forEach(e=>{e()})}),m.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let s=this.getCssData(this.__extractCssName(t),!0);s===null&&(s=e),this.add(t,s),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,s){let i="__"+t;this[i]=this[t],Object.defineProperty(this,t,{set:r=>{this[i]=r,s?window.setTimeout(()=>{e?.(r)}):e?.(r)},get:()=>this[i]}),this[t]=this[i]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),s=URL.createObjectURL(e),i=document.createElement("link");i.href=s,i.rel="stylesheet",this.__rootStylesLink=i}}},Q=p;v(Q,"template");var w=class{static _print(t){console.warn(t)}static setDefaultTitle(t){this.defaultTitle=t}static setRoutingMap(t){Object.assign(this.appMap,t);for(let e in this.appMap)!this.defaultRoute&&this.appMap[e].default===!0?this.defaultRoute=e:!this.errorRoute&&this.appMap[e].error===!0&&(this.errorRoute=e)}static set routingEventName(t){this.__routingEventName=t}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let t={route:null,options:{}};return window.location.search.split(this.separator).forEach(s=>{if(s.includes("?"))t.route=s.replace("?","");else if(s.includes("=")){let i=s.split("=");t.options[i[0]]=decodeURI(i[1])}else t.options[s]=!0}),t}static notify(){let t=this.readAddressBar(),e=this.appMap[t.route];if(e&&e.title&&(document.title=e.title),t.route===null&&this.defaultRoute){this.applyRoute(this.defaultRoute);return}else if(!e&&this.errorRoute){this.applyRoute(this.errorRoute);return}else if(!e&&this.defaultRoute){this.applyRoute(this.defaultRoute);return}else if(!e){this._print(`Route "${t.route}" not found...`);return}let s=new CustomEvent(w.routingEventName,{detail:{route:t.route,options:Object.assign(e||{},t.options)}});window.dispatchEvent(s)}static reflect(t,e={}){let s=this.appMap[t];if(!s){this._print("Wrong route: "+t);return}let i="?"+t;for(let o in e)e[o]===!0?i+=this.separator+o:i+=this.separator+o+`=${e[o]}`;let r=s.title||this.defaultTitle||"";window.history.pushState(null,r,i),document.title=r}static applyRoute(t,e={}){this.reflect(t,e),this.notify()}static setSeparator(t){this._separator=t}static get separator(){return this._separator||"&"}static createRouterData(t,e){this.setRoutingMap(e);let s=h.registerCtx({route:null,options:null,title:null},t);return window.addEventListener(this.routingEventName,i=>{var r;s.multiPub({route:i.detail.route,options:i.detail.options,title:((r=i.detail.options)==null?void 0:r.title)||this.defaultTitle||""})}),w.notify(),this.initPopstateListener(),s}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};w.appMap=Object.create(null);function J(t,e){for(let s in e)s.includes("-")?t.style.setProperty(s,e[s]):t.style[s]=e[s]}function Z(t,e){for(let s in e)e[s].constructor===Boolean?e[s]?t.setAttribute(s,""):t.removeAttribute(s):t.setAttribute(s,e[s])}function tt(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&Z(e,t.attributes),t.styles&&J(e,t.styles),t.properties)for(let s in t.properties)e[s]=t.properties[s];return t.processors&&t.processors.forEach(s=>{s(e)}),t.children&&t.children.forEach(s=>{let i=tt(s);e.appendChild(i)}),e}var D="idb-store-ready",et="symbiote-db",st="symbiote-idb-update_",it=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(D,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return st+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=s=>{this.db=s.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=i=>{this._notifyWhenReady(i)}},this.request.onsuccess=s=>{this.db=s.target.result,this._notifyWhenReady(s)},this.request.onerror=s=>{console.error(s)},this._subscriptionsMap={},this._updateHandler=s=>{s.key===this.name&&this._subscriptionsMap[s.newValue]&&this._subscriptionsMap[s.newValue].forEach(async r=>{r(await this.read(s.newValue))})},this._localUpdateHandler=s=>{this._updateHandler(s.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((i,r)=>{s.onsuccess=o=>{var l;(l=o.target.result)!=null&&l._value?i(o.target.result._value):(i(null),console.warn(`IDB: cannot read "${t}"`))},s.onerror=o=>{r(o)}})}write(t,e,s=!1){let i={_key:t,_value:e},o=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(i);return new Promise((l,a)=>{o.onsuccess=_=>{s||this._notifySubscribers(t),l(_.target.result)},o.onerror=_=>{a(_)}})}delete(t,e=!1){let i=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((r,o)=>{i.onsuccess=l=>{e||this._notifySubscribers(t),r(l)},i.onerror=l=>{o(l)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((s,i)=>{e.onsuccess=r=>{let o=r.target.result;s(o.map(l=>l._value))},e.onerror=r=>{i(r)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let s=this._subscriptionsMap[t];return s.add(e),{remove:()=>{s.delete(e),s.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,N.clear(this.name)}},N=class{static get readyEventName(){return D}static open(t=et,e="store"){let s=t+"/"+e;return this._reg[s]||(this._reg[s]=new it(t,e)),this._reg[s]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};v(N,"_reg",Object.create(null));export{w as AppRouter,Q as BaseComponent,h as Data,N as IDB,$ as UID,Z as applyAttributes,J as applyStyles,tt as create,I as kebabToCamel,x as setNestedProp};
//# sourceMappingURL=symbiote.mjs.map